<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>我要报名</title>
    <link rel="stylesheet" href="../css/signup.css"/>
    <script src="../js/jquery-1.11.2.js"></script>
</head>
<body>
<div class="title_jx">
    <ul class="step1">
        <li>1、填写信息</li>
        <li class="color1">2、核对订单</li>
        <li class="color1">3、报名成功</li>
    </ul>
    <div class="clear"></div>
    <div class="welcome">欢迎使用报名系统！请您认真填写以下报名信息，我们会尽快与您联系！</div>
    <div class="from">
        <form name="myform" id="myform" action="confirm.html" method="post">
            <table width="100%" border="0" cellspacing="10" cellpadding="0">
                <tbody>
                <tr>
                    <td width="100" align="right">培训班种：<span class="red">*</span></td>
                    <td colspan="2"><select class="input_field" name="info[trainid]">
                        <option value="15">
                            C1 全周预约班  ￥5200
                        </option>
                        <option value="14">
                            C1 平日预约班  ￥5000
                        </option>
                        <option value="20">
                            C1 商务班  ￥8800
                        </option>
                        <option value="17">
                            C2 商务班  ￥8800
                        </option>
                        <option value="21">
                            C2 白领丽人班  ￥7088
                        </option>
                        <option value="16">
                            C1 周末班  ￥6200
                        </option>
                        <option value="13">
                            C1 特约班  ￥5900
                        </option>
                        <option value="11">
                            C1 晚间班  ￥5100
                        </option>
                        <option value="12">
                            C1 快速实战班  ￥5300
                        </option>
                        <option value="10">
                            C2 全周预约班  ￥5400
                        </option>
                        <option value="9">
                            C2 平日预约班  ￥5200
                        </option>
                        <option value="8">
                            A1 增驾大客  ￥9000
                        </option>
                        <option value="7">
                            A3 增驾大客  ￥9000
                        </option>
                        <option value="6">
                            A3 增驾大客  ￥13000
                        </option>
                        <option value="5">
                            A3 增驾大客  ￥12000
                        </option>
                        <option value="4">
                            A3 初学大客  ￥13000
                        </option>
                    </select></td>
                </tr>
                <tr>
                    <td align="right">姓名：<span class="red">*</span></td>
                    <td width="245"><input type="text" value="" name="info[truename]" id="truename" class="field"></td>
                    <td align="left"><img id="truenameright" style="display:none;" src="../images/icon039.png" width="16" height="16" class="imgright"><span id="truenameerror" style="display:none;" class="zjnumerror">请输入姓名</span></td>
                </tr>
                <tr>
                    <td align="right">证件类型：<span class="red">*</span></td>
                    <td colspan="2"><select name="info[zjtype]" id="zjtype" class="input_field1">
                        <option value="0">身份证</option>
                        <option value="1">军官证</option>
                    </select></td>
                </tr>
                <tr>
                    <td align="right">证件号码：<span class="red">*</span></td>
                    <td><input type="text" value="" name="info[zjnum]" id="zjnum" class="field"></td>
                    <td align="left"><img id="zjnumright" style="display:none;" src="../images/icon039.png" width="16" height="16" class="imgright"><span style="display:none;" id="zjnumerror" class="zjnumerror">请输入有效的证件号码</span></td>
                </tr>
                <tr>
                    <td align="right">户口类型：<span class="red">*</span></td>
                    <td colspan="2"><label><input type="radio" name="info[hktype]" value="0" checked="true">
                        本市</label><label><input type="radio" name="info[hktype]" value="1">
                        外埠</label></td>
                </tr>
                <tr id="info_iszzj" style="display:none;">
                    <td align="right">是否有暂住证：<span class="red">*</span></td>
                    <td colspan="2"><label><input type="radio" name="info[iszzj]" value="0">
                        否</label>
                        <label><input type="radio" name="info[iszzj]" value="1" checked="">
                            是</label></td>
                </tr>
                <tr>
                    <td align="right">手机号码：<span class="red">*</span></td>
                    <td><input type="text" value="" name="info[mobile]" id="mobile" class="field"></td>
                    <td align="left"><img id="mobileright" style="display:none;" src="../images/icon039.png" width="16" height="16" class="imgright"><span style="display:none;" id="mobileerror" class="zjnumerror">请输入正确手机号码</span></td>
                </tr>
                <tr>
                    <td align="right">联系电话：</td>
                    <td><input type="text" value="" name="info[tel]" id="tel" class="field"></td>
                    <td align="left"><img id="telright" style="display:none;" src="../images/icon039.png" width="16" height="16" class="imgright"><span style="display:none;" id="telerror" class="zjnumerror">请输入正确电话号码</span></td>
                </tr>
                <input type="hidden" name="hefan" value="1">
                <tr>
                    <td width="20%" align="right">介绍人：</td>
                    <td width="80%"><select name="info[intro_type]" id="infointro_type">
                        <option value="0" selected="selected">无</option>
                        <option value="1">驾校员工</option>
                        <option value="2">报名站点</option>
                        <option value="4">汽车之友</option>
                        <option value="3">其他</option>
                    </select>
                <span style="display: none;" id="intro_div_1">
                  <input type="text" value="请输入驾校员工胸卡号" name="info[intro_xkh]" id="intro_xkh" class="field1" style="width:132px;">
                  <span id="intro_department"></span>&nbsp;
                  <span id="intro_name"></span><br>
                </span>
                <span style="display: none;" id="intro_div_2">
                  <select name="info[intro_bmcenter]" id="infointro_bmcenter">
                      <option value="8">通州区马驹桥报名中心</option>
                      <option value="2">西城区广外甘石桥报名中心</option>
                      <option value="1" selected="selected">丰台区万源路报名中心</option>
                      <option value="12">丰台区云岗报名中心</option>
                      <option value="17">大兴区德茂报名中心</option>
                      <option value="9">房山区良乡报名中心</option>
                      <option value="18">丰台区横七条报名中心</option>
                      <option value="6">通州区通州报名中心</option>
                      <option value="5">大兴区兴丰报名中心</option>
                      <option value="23">通州区次渠报名中心</option>
                      <option value="24">大兴区旧宫报名中心</option>
                      <option value="29">房山区房山城关报名中心</option>
                      <option value="10">大兴区羊坊报名中心</option>
                      <option value="21">丰台区纪家庙报名中心</option>
                      <option value="4">丰台区刘家窑报名中心</option>
                      <option value="3">朝阳区劲松报名中心</option>
                      <option value="7">朝阳区望京报名中心</option>
                      <option value="25">大兴区采育波尔多报名处</option>
                      <option value="28">大兴区长子营报名处</option>
                      <option value="15">海淀区公主坟报名处</option>
                      <option value="20">大兴区西红门报名处</option>
                      <option value="14">西城区南菜园报名处</option>
                      <option value="30">朝阳区十里堡报名处</option>
                      <option value="33">丰台区新发地报名处</option>
                      <option value="32">大兴区亦庄小白羊报名处</option>
                      <option value="31">大兴区南大红门报名处</option>
                  </select>
                </span>
                <span style="display: none;" id="intro_div_3">
                  <input type="text" value="请输入介绍人姓名" name="info[intro_people]" id="intro_people" class="field1" style="width:132px;">
                </span>
                <span style="display: none;" id="intro_div_4">
                  <input type="text" value="请输入汽车之友会员号" name="info[intro_carer]" id="intro_carer" class="field1" style="width:132px;">
                </span>
                    </td>
                </tr>
                <script>
                    (function($) {
                        var introPeople = "";
                        var introXkh    = "";
                        var introType   = "0";
                        var introBmcenter = "";
                        var introPeopleElement = $('#intro_people');
                        var introPeopleInitMsg = '请输入介绍人姓名';
                        introPeopleElement.focus(function() {
                            var value = $.trim(this.value);
                            if (value == introPeopleInitMsg) {
                                this.value = '';
                            }
                        }).blur(function() {
                            var value = $.trim(this.value);
                            if (value == '') {
                                this.value = introPeopleInitMsg;
                            }
                        });
                        var introCarerElement = $('#intro_carer');
                        var introCarerInitMsg = '请输入汽车之友会员号';
                        introCarerElement.focus(function() {
                            var value = $.trim(this.value);
                            if (value == introCarerInitMsg) {
                                this.value = '';
                            }
                        }).blur(function() {
                            var value = $.trim(this.value);
                            if (value == '') {
                                this.value = introCarerInitMsg;
                            }
                        });
                        $('[name="info[intro_type]"]').change(function() {
                            var $this = $(this);
                            $('span[id^="intro_div_"]').each(function() {
                                var that = $(this);
                                var id = that.attr('id');
                                id = id.substring(id.length - 1, id.length);
                                if ($this.val() == id) {
                                    that.show();
                                } else {
                                    that.hide();
                                }
                            });
                        });
                        var introDepartment = $('#intro_department');
                        var introName = $('#intro_name');
                        var cacheData = {};
                        var errorMsg  = '<font style="color:red;">胸卡号输入有误</font>';
                        var introXkhElement = $('#intro_xkh');
                        var introXkhInitMsg = '请输入驾校员工胸卡号';
                        introXkhElement.focus(function() {
                            var value = $.trim(this.value);
                            if (value == introXkhInitMsg) {
                                this.value = '';
                            }
                        }).blur(function() {
                            var $this = $(this);
                            var xkh = $.trim($this.val());
                            if (xkh.length > 5) {
                                introDepartment.html('<font style="color:red;">胸卡号是数字且不超5位</font>');
                            } else if (xkh.length > 1) {
                                if (typeof cacheData[xkh] === 'undefined') {
                                    introDepartment.html('正在查询...');
                                    introName.html('');
                                    $.post('/signup/getnamebyxkh?inajax=1', {xkh: xkh}, function(data) {
                                        if (data.code == 10008) {
                                            introDepartment.html(data.data.department);
                                            introName.html(data.data.name);
                                            cacheData[xkh] = {
                                                department: data.data.department,
                                                name: data.data.name
                                            };
                                        } else {
                                            cacheData[xkh] = null;
                                            introDepartment.html(errorMsg);
                                            introName.html('');
                                        }
                                    }, 'json');
                                } else {
                                    if (cacheData[xkh] === null) {
                                        introDepartment.html(errorMsg);
                                        introName.html('');
                                    } else {
                                        introDepartment.html(cacheData[xkh].department);
                                        introName.html(cacheData[xkh].name);
                                    }
                                }
                            } else {
                                this.value = introXkhInitMsg;
                                introDepartment.html('');
                                introName.html('');
                            }
                        });

                        var introTypeElement = $('[name="info[intro_type]"]');
                        var introBmcenterElement = $('[name="info[intro_bmcenter]"]');

                        if (introType) {
                            if (introType == '1' && introXkh.length > 0) {
                                introXkhElement.val(introXkh);
                                introXkhElement.blur();
                            } else if (introType == '3' && introPeople.length > 0) {
                                introPeopleElement.val(introPeople);
                            } else if (introType == '2') {
                                introBmcenterElement.val(introBmcenter);
                            }
                            introTypeElement.val(introType);
                            introTypeElement.change();
                        }

                    })(jQuery);
                </script>
                <tr>
                    <td align="right">E-mail：<span class="red">*</span></td>
                    <td><input type="text" value="" name="info[email]" id="email" class="field"></td>
                    <td align="left"><img id="emailright" style="display:none;" src="../images/icon039.png" width="16" height="16" class="imgright"><span style="display:none;" id="emailerror" class="zjnumerror">请输入正确邮件地址</span></td>
                </tr>
                <tr>
                    <td align="right">用户名：<span class="red">*</span></td>
                    <td><input type="text" value="" name="info[username]" id="username" class="field"></td>
                    <td align="left"><img id="usernameright" style="display:none;" src="../images/icon039.png" width="16" height="16"><span class="error_name" style="display:none;" id="usernameerror">用户名不合法，或者已经存在</span></td>
                </tr>
                <tr>
                    <td align="right">密码：<span class="red">*</span></td>
                    <td><input type="password" value="" name="info[password]" id="password" class="field"></td>
                    <td align="left"><img id="passwordright" style="display:none;" src="../images/icon039.png" width="16" height="16"><span style="display:none;" id="passworderror" class="passworderror">密码不能少于6位</span></td>
                </tr>
                <tr>
                    <td align="right">支付方式：<span class="red">*</span></td>
                    <td colspan="2">
                        <label><input name="info[payment]" type="radio" value="0" checked="">
                            在线支付报名费（600元）</label>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <label><input name="info[payment]" type="radio" value="1">
                            现场支付</label></td>
                </tr>
                <tr id="info_city" style="display:none;">
                    <td align="right">上门服务地址：<span class="red">*</span></td>
                    <td><select class="input_field1" name="info[city]">
                        <option value="东城区">东城区</option>
                        <option value="西城区">西城区</option>
                        <option value="崇文区">崇文区</option>
                        <option value="宣武区">宣武区</option>
                        <option value="朝阳区">朝阳区</option>
                        <option value="丰台区">丰台区</option>
                        <option value="石景山区">石景山区</option>
                        <option value="海淀区">海淀区</option>
                        <option value="门头沟区">门头沟区</option>
                        <option value="房山区">房山区</option>
                        <option value="通州区">通州区</option>
                        <option value="顺义区">顺义区</option>
                        <option value="昌平区">昌平区</option>
                        <option value="大兴区">大兴区</option>
                        <option value="怀柔区">怀柔区</option>
                        <option value="平谷区">平谷区</option>
                        <option value="密云县">密云县</option>
                        <option value="延庆县">延庆县</option>
                    </select>
                        <input type="text" value="" name="info[address]" id="address" class="field1"></td>
                    <td align="left"><img id="addressright" style="display:none;" src="/sites/all/themes/wip/templates/images/icon039.png" width="16" height="16"> <span style="display:none;" id="addresserror" class="addresserror">上门服务地址不能为空</span></td>
                </tr>
                <script>
                    (function($) {
                        var eleInfoCity  = $('#info_city');
                        var eleInfoPayment = $('[name="info[payment]"]');
                        var func = function(event) {
                            var value = eleInfoPayment.filter(':checked').val();
                            if (value == '1') {
                                eleInfoCity.fadeIn();
                            } else {
                                eleInfoCity.fadeOut();
                            }
                        };
                        eleInfoPayment.click(func);
                        func();
                    })(jQuery);
                </script>
                <tr>
                    <td align="right">备注：</td>
                    <td colspan="2"><textarea cols="" name="info[memo]" rows="" class="text"></textarea></td>
                </tr>
                <tr>
                    <td align="right"></td>
                    <td colspan="2"><input name="dosubmit" id="submit" value="" type="button" class="btn btn001">
                        <input type="reset" class="btn btn002" value=""></td>
                </tr>
                </tbody>
            </table>
            <script>
                $(function () {
                    //全为空的时候
                    var inputs=$('.field');
                    var imgs=$('.imgright');
                    var btn=$('.btn');
                    var errors=$('.zjnumerror');
                    var form=$('#myform');
                    btn.click(function () {
                        for(var i=0;i<inputs.length;i++){
                            inputs[i].index=i;
                            var value=$(inputs[i]).val();
                            if(value.replace(/\s/g,"")==''){
                                $(errors[i]).show();
                            }else if(imgs.css("display")=='inline'){
                                $(this).attr('type','submit');
                            }
                        }
                    })
                    //取消焦点的时候判断
                    inputs.blur(function(){
                        var id=$(this).attr('id');
                        var value=$(this).val();
                        if(value.replace(/\s/g,"")==''){
                            $('img[id='+id+'right]').hide();
                            $('span[id='+id+'error]').show();
                        }else{
                            $('span[id='+id+'error]').hide();
                            $('img[id='+id+'right]').show();
                        }
                    })
                    //单独判断
                    //身份证号验证
                    $('input[name="info[zjnum]"]').blur(function () {
                        var value=$(this).val();
                        var id=$(this).attr('id');
                        if(!/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(value)){
                            $('img[id='+id+'right]').hide();
                            $('span[id='+id+'error]').show();
                        }
                    })
                    //手机号码验证
                    $('input[name="info[mobile]"]').blur(function () {
                        var value=$(this).val();
                        var id=$(this).attr('id');
                        if (!/(^1[3|5|8][0-9]{9}$)/.test(value)){
                            $('img[id='+id+'right]').hide();
                            $('span[id='+id+'error]').show();
                        }
                    })
                    //电话号码验证
                    $('input[name="info[tel]"]').blur(function () {
                        var value=$(this).val();
                        var id=$(this).attr('id');
                        if (!/((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/.test(value)){
                            $('img[id='+id+'right]').hide();
                            $('span[id='+id+'error]').show();
                        }
                    })
                    //邮箱验证
                    $('input[name="info[email]"]').blur(function () {
                        var value=$(this).val();
                        var id=$(this).attr('id');
                        if (!/(^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$)/.test(value)){
                            $('img[id='+id+'right]').hide();
                            $('span[id='+id+'error]').show();
                        }
                    })
                    //密码验证
                    $('input[name="info[password]"]').blur(function () {
                        var value=$(this).val();
                        var id=$(this).attr('id');
                        if (value.length<6){
                            $('img[id='+id+'right]').hide();
                            $('span[id='+id+'error]').show();
                        }
                    })
                })
            </script>
        </form>
    </div>
</div>
</body>
</html>